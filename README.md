# ğŸ¯ Cyber Range - CTF è®­ç»ƒé¶åœºå¹³å°

ä¸€ä¸ªåŸºäº Docker å®¹å™¨åŒ–çš„ CTFï¼ˆCapture The Flagï¼‰è®­ç»ƒå¹³å°ï¼Œæ”¯æŒåŠ¨æ€ Flagã€å®ä¾‹éš”ç¦»ã€å¤šä¸»æœºè°ƒåº¦ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ³ **å®¹å™¨åŒ–é¶æœº**ï¼šæ¯ä¸ªç”¨æˆ·ç‹¬ç«‹çš„ Docker å®¹å™¨ç¯å¢ƒ
- ğŸ” **åŠ¨æ€ Flag**ï¼šæ¯ä¸ªå®ä¾‹ç”Ÿæˆå”¯ä¸€ Flagï¼Œé˜²æ­¢æŠ„è¢­
- â±ï¸ **è‡ªåŠ¨å›æ”¶**ï¼šå®ä¾‹è¶…æ—¶è‡ªåŠ¨æ¸…ç†ï¼Œé‡Šæ”¾èµ„æº
- ğŸ“Š **ç§¯åˆ†æ’è¡Œ**ï¼šæäº¤ Flag è‡ªåŠ¨è®¡åˆ†ï¼Œå®æ—¶æ’è¡Œæ¦œ
- ğŸ–¥ï¸ **å¤šä¸»æœºè°ƒåº¦**ï¼šæ”¯æŒæœ¬åœ°/è¿œç¨‹ Docker ä¸»æœºï¼ŒTLS åŠ å¯†è¿æ¥
- ğŸ¨ **ç®¡ç†åå°**ï¼šé¢˜åº“ç®¡ç†ã€å®ä¾‹ç›‘æ§ã€é•œåƒä¸Šä¼ 

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| **åç«¯** | Go (Gin + GORM) |
| **å‰ç«¯** | React + TypeScript + Ant Design |
| **æ•°æ®åº“** | MySQL |
| **ç¼“å­˜** | Redis |
| **å®¹å™¨** | Docker + Docker Registry |

---

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Go 1.22+
- Node.js 18+
- Docker
- MySQL 8.0+
- Redis 6.0+

### 2. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/cyber-range.git
cd cyber-range
```

### 3. é…ç½®æ•°æ®åº“

```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p -e "CREATE DATABASE cyber_range CHARACTER SET utf8mb4;"

# ç¼–è¾‘é…ç½®æ–‡ä»¶
cp configs/config.yaml.example configs/config.yaml
# ä¿®æ”¹æ•°æ®åº“è¿æ¥ä¿¡æ¯
```

### 4. åˆå§‹åŒ–æ•°æ®

```bash
# æ•°æ®åº“è¿ç§»
go run cmd/migrate/main.go

# å¡«å……ç§å­æ•°æ®ï¼ˆç®¡ç†å‘˜è´¦å·ã€æµ‹è¯•é¢˜ç›®ï¼‰
go run cmd/seed/main.go
```

### 5. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨åç«¯
go run cmd/api/main.go

# å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd web
npm install
npm run dev
```

### 6. è®¿é—®æœåŠ¡

- ç”¨æˆ·å‰å°ï¼šhttp://localhost:5173
- ç®¡ç†åå°ï¼šhttp://localhost:5173/admin
- API æœåŠ¡ï¼šhttp://localhost:8080

---

## ğŸ”‘ é»˜è®¤è´¦å·

| è§’è‰² | ç”¨æˆ·å | å¯†ç  |
|------|--------|------|
| ç®¡ç†å‘˜ | `admin` | `admin123` |

> âš ï¸ **å®‰å…¨æç¤º**ï¼šç”Ÿäº§ç¯å¢ƒè¯·åŠ¡å¿…ä¿®æ”¹é»˜è®¤å¯†ç ï¼

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
cyber-range/
â”œâ”€â”€ cmd/                    # å‘½ä»¤å…¥å£
â”‚   â”œâ”€â”€ api/               # ä¸»æœåŠ¡
â”‚   â”œâ”€â”€ migrate/           # æ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ seed/              # ç§å­æ•°æ®
â”œâ”€â”€ internal/              # æ ¸å¿ƒä»£ç ï¼ˆç§æœ‰ï¼‰
â”‚   â”œâ”€â”€ api/handlers/      # HTTP å¤„ç†å™¨
â”‚   â”œâ”€â”€ api/middleware/    # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ service/           # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ infra/             # åŸºç¡€è®¾æ–½
â”‚   â””â”€â”€ model/             # æ•°æ®æ¨¡å‹
â”œâ”€â”€ pkg/                   # å…¬å…±åŒ…
â”œâ”€â”€ web/                   # å‰ç«¯ä»£ç 
â”œâ”€â”€ scripts/               # è¿ç»´è„šæœ¬
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â””â”€â”€ configs/               # é…ç½®æ–‡ä»¶
```

---

## ğŸ”§ é…ç½®è¯´æ˜

é…ç½®æ–‡ä»¶è·¯å¾„ï¼š`configs/config.yaml`

```yaml
server:
  port: 8080
  env: dev

mysql:
  host: localhost
  port: 3306
  user: root
  password: your_password
  database: cyber_range

redis:
  host: localhost
  port: 6379

docker:
  mode: local              # local æˆ– remote
  port_range_min: 20000
  port_range_max: 40000
  memory_limit: 134217728  # 128MB
  cpu_limit: 0.5

instance:
  ttl_hours: 1             # å®ä¾‹å­˜æ´»æ—¶é—´
```

---

## ğŸ“œ å¸¸ç”¨å‘½ä»¤

```bash
# ğŸš€ å¯åŠ¨æœåŠ¡
go run cmd/api/main.go

# ğŸ“¦ é•œåƒç®¡ç†
./scripts/start-registry.sh          # å¯åŠ¨ Registry
./scripts/import-image.sh xxx.tar    # å¯¼å…¥é•œåƒ

# ğŸ“¢ é¢˜ç›®ç®¡ç†
./scripts/publish_all_challenges.sh  # æ‰¹é‡å‘å¸ƒé¢˜ç›®

# ğŸ§ª æµ‹è¯•
./scripts/test_admin_api.sh          # ç®¡ç†åå°APIæµ‹è¯•
./scripts/test_core_features.sh      # æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
```

---

## ğŸ“š æ–‡æ¡£

è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹ `docs/` ç›®å½•ï¼š

- [API æ–‡æ¡£](docs/API.md)
- [éœ€æ±‚æ–‡æ¡£](docs/éœ€æ±‚æ–‡æ¡£.md)
- [è¿œç¨‹ Docker é…ç½®](docs/REMOTE_DOCKER_SETUP.md)
- [è„šæœ¬ç´¢å¼•](docs/SCRIPTS_AND_DOCS_INDEX.md)

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ (React)   â”‚â”€â”€â”€â”€â–¶â”‚  åç«¯ API (Gin)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                        â–¼                        â–¼
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚    MySQL    â”‚         â”‚    Redis    â”‚         â”‚   Docker    â”‚
 â”‚  (æŒä¹…å­˜å‚¨)  â”‚         â”‚  (å®ä¾‹ç¼“å­˜)  â”‚         â”‚  (å®¹å™¨ç®¡ç†)  â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“„ License

MIT License

---

## ğŸ™ è‡´è°¢

- [Gin](https://github.com/gin-gonic/gin) - Web æ¡†æ¶
- [GORM](https://gorm.io/) - ORM åº“
- [Ant Design](https://ant.design/) - UI ç»„ä»¶åº“
- [Docker SDK](https://github.com/docker/docker) - å®¹å™¨ç®¡ç†
